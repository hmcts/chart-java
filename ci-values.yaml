image: hmcts.azurecr.io/hmcts/plum-recipe-backend
replicas: 2
useInterpodAntiAffinity: true
ingressHost: chart-java.service.core-compute-preview.internal
environment:
  REFORM_TEAM: cnp
  REFORM_SERVICE_NAME: rhubarb-backend
  REFORM_ENVIRONMENT: preview
configmap:
  VAR_A: VALUE_A
  VAR_B: VALUE_B

keyVaults:
  "plumsi":
    excludeEnvironmentSuffix: false
    resourceGroup: plum-shared-infrastructure
    secrets:
      - recipe-backend-POSTGRES-DATABASE
      - recipe-backend-POSTGRES-HOST
      - recipe-backend-POSTGRES-USER
      - recipe-backend-POSTGRES-PASS
  "s2s":
    resourceGroup: rpe-service-auth-provider
    # excludeEnvironmentSuffix: false  # missing value == false
    # secretRef: "kvcreds"  # "kvcreds" is the default value, no need to add it
    secrets:
      - microservicekey-cmcLegalFrontend

tags:
  postgresql-pod: true

test:
  image: hmcts.azurecr.io/hmcts/plum-recipe-backend-test
  keyVaults:
    "plumsi":
      excludeEnvironmentSuffix: false
      resourceGroup: plum-shared-infrastructure
      secrets:
        test-client-key-store: TEST_CLIENT_KEY_STORE
        test-client-key-store-password: TEST_CLIENT_KEY_STORE_PASSWORD
        test-client-subscription-key: TEST_CLIENT_SUBSCRIPTION_KEY

global:
  subscriptionId: "1c4f0704-a29e-403d-b719-b90c34ef14c9"
  tenantId: "531ff96d-0ae9-462a-8d2d-bec7c0b42082"
  environment: aat
