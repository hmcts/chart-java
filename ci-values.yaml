image: hmcts.azurecr.io/hmcts/plum-recipe-backend
replicas: 2
useInterpodAntiAffinity: true
ingressHost: chart-java.service.core-compute-preview.internal
applicationPort: 4550
environment:
  REFORM_TEAM: cnp
  REFORM_SERVICE_NAME: rhubarb-backend
  REFORM_ENVIRONMENT: preview
  CONFIG_TEMPLATE: "{{ .Release.Name }}-config"
  BOOLEAN_EXAMPLE: false
  POSTGRES_HOST: chart-java-release-postgresql
  POSTGRES_SSL_MODE: disable
  POSTGRES_DATABASE: plum
  POSTGRES_USER: hmcts
  POSTGRES_PASSWORD: hmcts
configmap:
  VAR_A: VALUE_A
  VAR_B: VALUE_B
secrets:
  CONNECTION_STRING:
    secretRef: some-secret-reference
    key: connectionString
    disabled: true
prometheus:
  enabled: true
keyVaults:
  "plumsi":
    excludeEnvironmentSuffix: false
    resourceGroup: plum-shared-infrastructure
    secrets:
      - recipe-backend-POSTGRES-DATABASE
      - recipe-backend-POSTGRES-HOST
      - recipe-backend-POSTGRES-USER
      - recipe-backend-POSTGRES-PASS
  "s2s":
    # excludeEnvironmentSuffix: false  # missing value == false
    # secretRef: "kvcreds"  # "kvcreds" is the default value, no need to add it
    secrets:
      - microservicekey-cmcLegalFrontend

postgresql:
  ## Whether to deploy the Postgres Chart or not
  enabled: true
  ## Disable Postgres Persistence
  persistence:
    enabled: false
  ## Default Postgres Configuration parameters
  postgresqlUsername: hmcts
  postgresqlPassword: hmcts
  postgresqlDatabase: plum

test:
  image: hmcts.azurecr.io/hmcts/plum-recipe-backend-test
  keyVaults:
    "plumsi":
      excludeEnvironmentSuffix: false
      resourceGroup: plum-shared-infrastructure
      secrets:
        test-client-key-store: TEST_CLIENT_KEY_STORE
        test-client-key-store-password: TEST_CLIENT_KEY_STORE_PASSWORD
        test-client-subscription-key: TEST_CLIENT_SUBSCRIPTION_KEY

global:
  tenantId: "531ff96d-0ae9-462a-8d2d-bec7c0b42082"
  environment: aat
  enableKeyVaults: true
